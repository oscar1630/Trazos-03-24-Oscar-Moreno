;/*FB_PKG_DELIM*/

__d("MAWAsyncEBIssueRangeQuery",["I64","MAWAsyncEBPendingQueryPromise","MWEncryptedBackupsIssueRangeQuery"],(function(a,b,c,d,e,f,g){"use strict";var h;function a(a,b,c,e,f,g){g===void 0&&(g=0);a=d("MWEncryptedBackupsIssueRangeQuery").runQuery(a,b,c,e,(h||(h=d("I64"))).of_int32(f),h.of_int32(g));return a==null?null:d("MAWAsyncEBPendingQueryPromise").getPendingQueryPromiseFromTrace(a)}g.issueQueryAsPromise=a}),98);
__d("MAWEBFetch",["FBLogger","I64","MAWAsyncEBIssueRangeQuery","MWEncryptedBackUpEBNotEnabledError","WAResultOrError","WATimeUtils","asyncToGeneratorRuntime"],(function(a,b,c,d,e,f,g){"use strict";var h;function a(a){return i.apply(this,arguments)}function i(){i=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a){var b=a.chatId,e=a.chatJid,f=a.count,g=a.db,h=a.direction;a=a.timestampMs;f=k(f,h);var i=f[0];f=f[1];e=d("MAWAsyncEBIssueRangeQuery").issueQueryAsPromise(e,g,b,j(a,h),i,f);if(e==null)return d("WAResultOrError").makeResult({hasMoreAfter:!1,hasMoreBefore:!1,messages:[]});g=(yield e.then(function(a){return d("WAResultOrError").makeResult(a)})["catch"](function(a){if(a&&(a==null?void 0:a.message)===d("MWEncryptedBackUpEBNotEnabledError").EB_NOT_ENABLED)return d("WAResultOrError").makeError(d("MWEncryptedBackUpEBNotEnabledError").EB_NOT_ENABLED);c("FBLogger")("messenger_e2ee_web").catching(a).mustfix("[EBFetch] Failed to fetch");return d("WAResultOrError").makeError(null)}));if(g.success===!1)return g;b=g.value;a=b.hasMoreAfter;h=b.hasMoreBefore;i=b.messages;return d("WAResultOrError").makeResult({hasMoreAfter:a,hasMoreBefore:h,messages:i})});return i.apply(this,arguments)}function j(a,b){if(a!=null)return(h||(h=d("I64"))).min(a,h.of_float(d("WATimeUtils").millisTime()));switch(b){case"before":return(h||(h=d("I64"))).of_float(d("WATimeUtils").millisTime());case"after":return(h||(h=d("I64"))).zero;default:b;return(h||(h=d("I64"))).max_int}}function k(a,b){switch(b){case"before":return[a,0];case"after":return[0,a];default:b;return[Math.ceil(a/2),Math.ceil(a/2)]}}g["default"]=a}),98);